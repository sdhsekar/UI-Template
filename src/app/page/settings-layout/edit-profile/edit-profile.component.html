<div class="edit-profile-page">
  <app-card1 [title]="'Edit Profile'">
    <div body>
      <div class="img-with-size flex-layout-column">
        <div (click)="fileInput.click()" class="profile-img-wrapper" style="cursor: pointer">
          <div class="circle">
            <img [src]="candidateProfileImg ? candidateProfileImg : profileImg" alt="profile img"
                 class="profile-img-full"/>
          </div>
        </div>

        <input #fileInput (change)="fileChangeEvent($event)" accept="image/*" hidden style="height: 0" type="file"/>

        <image-cropper (cropperReady)="cropperReady()"
                       (imageCropped)="imageCropped($event)"
                       (imageLoaded)="imageLoaded()"
                       (loadImageFailed)="loadImageFailed()"
                       [aspectRatio]="1"
                       [imageChangedEvent]="imageChangedEvent"
                       [maintainAspectRatio]="true"
                       [resizeToWidth]="400"
                       [style]="imageChangedEvent ? 'display:block' : 'display:none'"
                       format="png"
                       outputType="file"
                       style="max-width: 400px; padding: 0"
        ></image-cropper>

        <br/>

        <p>upload a profile picture or update your profile details below</p>
      </div>
      <form (ngSubmit)="onSubmit()" [formGroup]="form">
        <div class="section-header">
          <p class="dim">About</p>
          <hr/>
        </div>
        <div class="section">
          <!-- primary info fields -->
          <div [class.input-error]="submitted && form.controls.firstName.invalid" class="input-with-icon">
            <input formControlName="firstName" placeholder="First name..." required type="text">
            <i aria-hidden="true" class="fas fa-user fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.lastName.invalid" class="input-with-icon">
            <input formControlName="lastName" placeholder="Last name..." required type="text">
            <i aria-hidden="true" class="fas fa-user fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.bio.invalid" class="input-with-icon">
            <textarea formControlName="bio" maxlength="500" placeholder="Bio..." rows="2"></textarea>
            <i aria-hidden="true" class="fas fa-address-book fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.location.invalid" class="input-with-icon">
            <input formControlName="location" placeholder="Location..." type="text">
            <i aria-hidden="true" class="fas fa-map-marked-alt fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.phone.invalid" class="input-with-icon">
            <input formControlName="phone" placeholder="Phone..." type="text">
            <i aria-hidden="true" class="fas fa-phone fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.website.invalid" class="input-with-icon">
            <input formControlName="website" placeholder="Website..." type="text">
            <i aria-hidden="true" class="fas fa-globe fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.twitter.invalid" class="input-with-icon">
            <input formControlName="twitter" placeholder="Twitter..." type="text">
            <i aria-hidden="true" class="fab fa-twitter fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.facebook.invalid" class="input-with-icon">
            <input formControlName="facebook" placeholder="Facebook..." type="text">
            <i aria-hidden="true" class="fab fa-facebook fa-lg fa-fw"></i>
          </div>
          <div [class.input-error]="submitted && form.controls.youtube.invalid" class="input-with-icon">
            <input formControlName="youtube" placeholder="Youtube..." type="text">
            <i aria-hidden="true" class="fab fa-youtube fa-lg fa-fw"></i>
          </div>
        </div>
        <div class="section-header">
          <p class="dim">Interests</p>
          <hr/>
        </div>
        <div class="section" style="align-items: flex-start; justify-content: flex-start;">
          <!-- interest fields -->
          <div [class]="'interest-search-area'" class="input-with-icon">
            <input #searchArea (keyup)="search($event)" placeholder="Search..." type="text">
            <i aria-hidden="true" class="fas fa-book-open fa-lg fa-fw"></i>
          </div>
          <div *ngIf="(categorySearchResults.length > 0) && searchEnabled" class="interest-search-results">
            <a (click)="categorySearchResults = []; addToInterestsList(result)"
               *ngFor="let result of categorySearchResults">
              <app-label-data [data]="(result.category ? result.category.name : '') +
          (result.subCategory ? ' - ' + result.subCategory.name : '') + (result.leafCategory ? ' - ' + result.leafCategory.name : '')"
                              [noMargin]="true">
              </app-label-data>
            </a>
          </div>
          <div class="interest-list">
            <app-label-with-icon-data (click)="removeFromInterestList(result)" *ngFor="let result of interests"
                                      [data]="(!result.leafCategory && !result.subCategory && result.category ? result.category.name : '') +
          (!result.leafCategory && result.subCategory ? result.subCategory.name : '') + (result.leafCategory ? result.leafCategory.name : '')"
                                      [fixWidth]="true" [noMarginIcon]="true" [noMargin]="true"
                                      [solid]="'times'">
            </app-label-with-icon-data>
          </div>
        </div>
        <div class="section-submit">
          <app-button1 [text]="'DONE'"></app-button1>
          <a [routerLink]="URLS.dashboard.root">
            skip for now
          </a>
        </div>
      </form>
    </div>
  </app-card1>
</div>
